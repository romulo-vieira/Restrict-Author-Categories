(this["webpackJsonpnew-app"]=this["webpackJsonpnew-app"]||[]).push([[0],{174:function(e,t,r){e.exports=r(374)},373:function(e,t,r){},374:function(e,t,r){"use strict";r.r(t);r(175),r(184);var a=r(1),n=r.n(a),c=r(173),s=r.n(c),u=r(31),l=r(46),i=r(17);r(373);var o=function(e){return n.a.createElement("li",{className:"resautcat-user-li resautcat-type-li"+(e.userData.isActive?" active":"")+(e.isSelected?" selected":""),onClick:function(t){e.changeCurrentUser(Object(u.a)(Object(u.a)({},e.userData),{},{arrKey:e.arrKey}))}},n.a.createElement("button",{className:"resautcat-user-name resautcat-type-button-container"},e.userData.userName))};var d=function(e){return n.a.createElement("button",{className:"resautcat-on-off-button"+(e.selected?" selected":""),onClick:function(t){return e.onClick(t)},title:e.title||!1},n.a.createElement("div",{className:"resautcat-on-off-button-back"}),n.a.createElement("div",{className:"resautcat-on-off-button-round"}))},m=function(){var e=function(){},t=function(e,t,r,a){var n=new XMLHttpRequest,c=t,s=r;e=-1!==["GET","POST"].indexOf(e)?e:"GET",n.open(e,c+("GET"===e?"?"+s:""),!0),"POST"===e&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){4===n.readyState&&200<=n.status&&300>n.status&&"function"===typeof a&&a.call(void 0,JSON.parse(n.response))},n.send("POST"===e?s:null)};return{get:function(r,a,n){t("GET",r,a,n="function"===typeof n?n:e)},post:function(r,a,n){t("POST",r,a,n="function"===typeof n?n:e)}}}(),f=function(){return""},p={},E={},v=function(e,t){return f()+"/wp-json/resautcat_api_admin/set_user/"+e+"/"+t+"/"},h=function e(t,r,a){if(null===t)p[r]||(m.get(v(r,a),"",e),p[r]=!0),E[r]=a;else if(delete p[r],"success"===t.result){var n="true"===t.data.isActive,c=parseInt(t.data.userId);return!1===n&&!0===E[c]||!0===n&&!1===E[c]?(m.get(v(c,E[c]),"",e),void delete p[c]):void delete p[c]}},b={},g={};function I(e,t,r){return f()+"/wp-json/resautcat_api_admin/set_term/"+e+"/"+t+"/"+r+"/"}function j(e,t,r,a){if(null===e){var n="u"+r+"t"+t;b[n]||(m.get(I(t,r,a),"",j),b[n]=!0),g[n]=a}else if(delete b["u"+r+"t"+t],"success"===e.result){var c=parseInt(e.data.userid),s=parseInt(e.data.termid),u="true"===e.data.caneditpost,l="u"+c+"t"+s;return!1===u&&!0===g[l]||!0===u&&!1===g[l]?(m.get(I(s,c,g[l]),"",j),void delete b[l]):void delete b[l]}}var O=null,C=function(e,t,r,a){return f()+"/wp-json/resautcat_api_admin/categories/"+e+"/"+t+"/"+r+"/"+a},y=null,N={},P=!1,S=function e(t,r){if(null!==t)return P=!1,"object"===typeof t&&"success"===t.result?"undefined"===typeof t.userId||isNaN(parseInt(t.userId))||parseInt(t.userId)<=0||"undefined"===typeof O||isNaN(parseInt(O))||parseInt(O)<=0?void console.log("Error on GET terms on DB"):O===parseInt(t.userId)?void y(t):void m.get(C(N.userId,N.quant,N.offset,N.parent),"search="+N.search,e):void console.log("Error on GET terms on DB");P||(m.get(C(r.userId,r.quant,r.offset,r.parent),"search="+r.search,e),P=!0)},U=n.a.createElement("svg",{viewBox:"0 0 512 512"},n.a.createElement("g",null,n.a.createElement("path",{d:"M492,236H20c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h472c11.046,0,20-8.954,20-20S503.046,236,492,236z"}))),T=n.a.createElement("svg",{viewBox:"0 0 512 512"},n.a.createElement("g",null,n.a.createElement("path",{d:"M492,236H276V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v216H20c-11.046,0-20,8.954-20,20s8.954,20,20,20h216    v216c0,11.046,8.954,20,20,20s20-8.954,20-20V276h216c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z"})));var D=function(e){var t=Object(a.useState)(e.termData.termCanEditPost),r=Object(i.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)(!1),d=Object(i.a)(o,2),m=d[0],f=d[1],p=Object(a.useState)(!0),E=Object(i.a)(p,2),v=E[0],h=E[1],b=Object(a.useState)(!1),g=Object(i.a)(b,2),I=g[0],O=g[1],C=Object(a.useRef)(!1),y=function(t){var r,a;t!==c&&(s(t),r=e.termData.termId,a=e.currentUser.userId,j(null,r,a,t)),t&&e.changeCurrentUser(Object(u.a)(Object(u.a)({},e.currentUser),{},{isActive:t}))};return Object(a.useEffect)((function(){!1===e.prevTermCanEditPost&&y(!1)}),[e.prevTermCanEditPost]),Object(a.useEffect)((function(){e.termData.termChildren>0&&e.termData.termCanEditPost&&(f(!0),C.current=!0),e.termData.termCanEditPost&&null!==e.parentSetHideChildren&&e.parentSetHideChildren()}),[]),n.a.createElement("li",{className:"resautcat-term-li resautcat-type-li"+(c?" active":"")+(I&&!v?" expanded":"")},n.a.createElement("div",{className:"resautcat-term-li-container"},n.a.createElement("button",{className:"resautcat-term-name resautcat-type-button-container",onClick:function(t){return function(){var t=!c;t&&e.chainChangeCanEditPost.forEach((function(e){return e(t)})),y(t)}()}},n.a.createElement("div",{className:"resautcat-term-button resautcat-type-button"+(c?" selected":"")}),e.termData.termName),e.termData.termChildren>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"resautcat-term-expand-button",onClick:function(e){!1===m?(f(!0),h(!1)):h(!v)},title:"Expand Sub-Categories",disabled:!(!m||I)&&"disabled"},n.a.createElement("div",{className:"resautcat-term-expand-svg-container"},m&&!I?n.a.createElement("div",{className:"lds-dual-ring"}):I&&!v?U:T)))),m&&n.a.createElement(R,{changeCurrentUser:e.changeCurrentUser,currentUser:e.currentUser,currentUserId:e.currentUserId,parent:e.termData.termId,setChildrenDataIsLoaded:O,chainChangeCanEditPost:[].concat(Object(l.a)(e.chainChangeCanEditPost),[y]),prevTermCanEditPost:c,hideContainer:v,parentSetHideChildren:C.current?h:null}))};var R=function(e){var t=Object(a.useRef)(!e.isPrimary),r=Object(a.useRef)(null),c=Object(a.useRef)(null),s=Object(a.useRef)(!1),u=Object(a.useRef)(!0),o=Object(a.useRef)([]),d=Object(a.useRef)(0),f=Object(a.useRef)(null),p=Object(a.useRef)({quant:e.isPrimary?200:10,userId:0,parent:e.parent,offset:0,search:"",totalTerms:0}),E=Object(a.useState)(!!e.isPrimary),v=Object(i.a)(E,2),h=v[0],b=v[1],g=Object(a.useState)(!1),I=Object(i.a)(g,2),j=I[0],P=I[1],U=Object(a.useState)([]),R=Object(i.a)(U,2),H=R[0],w=R[1],A=Object(a.useState)(!1),k=Object(i.a)(A,2),q=k[0],L=k[1],_=function(e){e.data.length>0?(p.current.totalTerms=parseInt(e.totalTerms),w(H.slice(0,parseInt(e.offset)).concat(e.data.map((function(e){return{termId:parseInt(e.termId),termName:e.termName,termParent:parseInt(e.termParent),termCanEditPost:"1"===e.termCanEditPost,termCanSeePost:"1"===e.termCanSeePost,termChildren:parseInt(e.termChildren)}}))))):(s.current=!0,P(!j),b(!0))},x=function(){var t=o.current.length,r=_;o.current=[].concat(Object(l.a)(o.current),[r]);var a={userId:p.current.userId,quant:p.current.quant,offset:p.current.offset,parent:p.current.parent,search:p.current.search,callback:function(e){"undefined"!==typeof o.current[t]&&null!==o.current[t]&&o.current[t](e)}};e.isPrimary?(O=(N=a).userId,y=N.callback,S(null,N)):function(e){O=e.userId;var t=C(e.userId,e.quant,e.offset,e.parent),r="search="+e.search;m.get(t,r,(function(t){"object"===typeof t&&"success"===t.result?O===parseInt(t.userId)&&e.callback(t):console.log("Error on GET terms on DB")}))}(a)};return Object(a.useEffect)((function(){e.isPrimary||("undefined"!==typeof H[0]&&"undefined"!==typeof e.setChildrenDataIsLoaded&&e.setChildrenDataIsLoaded(!0),u.current&&(p.current.userId=e.currentUserId,u.current=!1,b(!0),x())),H.length>0&&(p.current.offset=H.length,b(!1))}),[H]),Object(a.useEffect)((function(){e.isPrimary&&(h||null===c.current&&(c.current=setInterval((function(){(r.current.clientHeight+r.current.scrollTop)/r.current.scrollHeight>.8&&(clearInterval(c.current),c.current=null,b(!0),x())}),100)))}),[h,q]),Object(a.useEffect)((function(){if(null===f.current)f.current=!1;else if(p.current.userId=e.currentUserId,e.isPrimary)if(t.current){for(var r=d.current-1<=0?0:d.current-1;r<o.current.length;r++)o.current[r]=null;d.current=o.current.length-1,null!==c.current&&clearInterval(c.current),c.current=null,s.current=!1,p.current.totalTerms=0,p.current.offset=0,w([]),h?b(!1):L(!q)}else t.current=!0,b(!1);else o.current=[]}),[e.currentUserId]),n.a.createElement("ul",{id:e.isPrimary?"resautcat-term-ul":"",ref:r,className:"resautcat-type-ul"+(e.hideContainer?" hide-ul":"")},H.map((function(t){return n.a.createElement(D,{key:t.termId,currentUser:e.currentUser,changeCurrentUser:e.changeCurrentUser,termData:t,chainChangeCanEditPost:e.chainChangeCanEditPost,prevTermCanEditPost:e.prevTermCanEditPost,parentSetHideChildren:e.parentSetHideChildren,currentUserId:e.currentUserId})})),e.isPrimary&&H.length>0&&H.length<p.current.totalTerms&&t.current&&n.a.createElement("li",{className:"resautcat-term-li resautcat-type-li resautcat-loading-li"},n.a.createElement("button",null,"Loading Categories"),n.a.createElement("div",{className:"lds-dual-ring"})),e.isPrimary&&0===H.length&&s.current&&t.current&&n.a.createElement("div",{className:"resautcat-message"},n.a.createElement("h3",null,"No Category Found")),e.isPrimary&&0===H.length&&t.current&&!s.current&&n.a.createElement("div",{className:"resautcat-message"},n.a.createElement("div",{className:"lds-dual-ring"})),e.isPrimary&&e.usersLength>0&&!t.current&&n.a.createElement("div",{className:"resautcat-message"},n.a.createElement("h3",null,"Select a User")),!e.isPrimary&&H.length<p.current.totalTerms&&t.current&&n.a.createElement("li",{className:"resautcat-term-li resautcat-type-li resautcat-load-more-terms-li"},h?n.a.createElement("div",{className:"lds-dual-ring"}):n.a.createElement("button",{onClick:function(e){b(!0),x()}},T,n.a.createElement("span",null,"Load More"))))};var H=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useRef)(!1),c=Object(a.useRef)({quant:200,offset:0,totalUsers:0,search:""}),s=Object(a.useState)(!1),p=Object(i.a)(s,2),E=p[0],v=p[1],b=Object(a.useState)(!1),g=Object(i.a)(b,2),I=g[0],j=g[1],O=Object(a.useState)({}),C=Object(i.a)(O,2),y=C[0],N=C[1],P=Object(a.useState)([]),S=Object(i.a)(P,2),U=S[0],T=S[1],D=function(e){e.data.length>0?(c.current.totalUsers=e.totalUsers,T([].concat(Object(l.a)(U),Object(l.a)(e.data.map((function(e){return{userId:parseInt(e.userId),userName:e.userName,isActive:"1"===e.isActive}})))))):(r.current=!0,j(!I))};Object(a.useEffect)((function(){U.length>0&&(c.current.offset=U.length,v(!1))}),[U]),Object(a.useEffect)((function(){E||null===t.current&&(t.current=setInterval((function(){(e.current.clientHeight+e.current.scrollTop)/e.current.scrollHeight>.8&&(clearInterval(t.current),t.current=null,v(!0),function(e,t,r){var a=f()+"/wp-json/resautcat_api_admin/users/"+e+"/"+t;m.get(a,"search=",(function(e){"object"===typeof e&&"success"===e.result?r(e):console.log("Error on GET users on DB")}))}(c.current.quant,c.current.offset,D))}),100))}),[E]);var H=function(e){if("undefined"===typeof y.userId)N(e);else if(e.userId!==y.userId)N(e);else if(e.isActive!==y.isActive){var t=U.slice();"undefined"!==typeof e.arrKey&&t[e.arrKey].userId===e.userId?(t[e.arrKey].isActive=e.isActive,T(t)):T(U.map((function(t){return t.userId===e.userId?Object(u.a)(Object(u.a)({},t),{},{isActive:e.isActive}):t}))),r=e.userId,a=e.isActive,h(null,r,a),N(e)}var r,a};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"resautcat-content-user",className:"resautcat-type-container"},n.a.createElement("div",{id:"resautcat-user-title-container",className:"resautcat-title-container"+(y.userId?" selected-user":"")},n.a.createElement("h3",{id:"resautcat-user-title",className:"resautcat-type-title"},y.userName||"Users"),!!y.userId&&n.a.createElement(d,{title:"Activate/Deactivate User",selected:!!y.isActive,onClick:function(e){return H(Object(u.a)(Object(u.a)({},y),{},{isActive:!y.isActive}))}})),n.a.createElement("ul",{id:"resautcat-user-ul",className:"resautcat-type-ul",ref:e},U.map((function(e,t){return n.a.createElement(o,{key:e.userId,changeCurrentUser:H,arrKey:t,userData:e,isSelected:y.userId===e.userId})})),!r.current&&U.length>0&&U.length<c.current.totalUsers&&n.a.createElement("li",{className:"resautcat-user-li resautcat-type-li resautcat-loading-li"},n.a.createElement("button",null,"Loading Users"),n.a.createElement("div",{className:"lds-dual-ring"})),!r.current&&0===U.length&&n.a.createElement("div",{className:"resautcat-message"},n.a.createElement("div",{className:"lds-dual-ring"})),r.current&&0===U.length&&n.a.createElement("div",{className:"resautcat-message"},n.a.createElement("h3",null,"No User Found"),n.a.createElement("p",null,"You can only select non-admin users")))),n.a.createElement("div",{id:"resautcat-content-term",className:"resautcat-type-container"},n.a.createElement(R,{changeCurrentUser:H,currentUser:y,currentUserId:y.userId,parent:0,isPrimary:!0,chainChangeCanEditPost:[],prevTermCanEditPost:null,parentSetHideChildren:null,usersLength:U.length})))};window.addEventListener("load",(function(e){s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(H,null)),document.getElementById("resautcat-content-container"))}))}},[[174,1,2]]]);
//# sourceMappingURL=main.6d41d871.chunk.js.map