{"version":3,"sources":["UserSelector.js","OnOffButton.js","resources.js","svgIcons.js","TermSelector.js","TermContainer.js","App.js","index.js"],"names":["UserSelector","props","className","userData","isActive","isSelected","onClick","e","changeCurrentUser","arrKey","userName","OnOffButton","selected","title","resautcatAjax","noop","ajax","method","url","params","callback","xhr","XMLHttpRequest","target","args","indexOf","open","setRequestHeader","onreadystatechange","readyState","status","call","undefined","JSON","parse","response","send","get","post","getHostDomain","waitingResponseUsers","modifiedIsActive","setUserUrl","userId","setUserDBHandler","result","dbIsActive","data","dbUserId","parseInt","waitingResponseTerms","modified_caneditpost","set_term_url","term_id","current_user_id","caneditpost","setTermDBHandler","tid","cuid","set_term_uid","dbcuid","dbtid","dbcaneditpost","currentUserId","getCategoriesUrl","quant","offset","parent","primaryCallback","primaryQueryData","waitingPrimaryResponse","getCategoriesDBHandler","queryData","isNaN","console","log","search","minusSvg","viewBox","d","plusSvg","TermSelector","useState","termData","termCanEditPost","setTermCanEditPost","loadChildren","setLoadChildren","hideChildren","setHideChildren","childrenDataIsLoaded","setChildrenDataIsLoaded","unhideParent","useRef","changeCanEditPost","newTermCanEditPost","termId","currentUser","useEffect","prevTermCanEditPost","termChildren","current","parentSetHideChildren","chainChangeCanEditPost","forEach","f","buttonClickHandler","termName","disabled","hideContainer","TermContainer","hasLoadedUser","isPrimary","termUlRef","termUlTimer","noTermsFound","firstRun","allGetTerms","allGetTermsTracker","hasChangedUser","termsData","totalTerms","loadingState","setLoadingState","reRender","setReRender","allTerms","setAllTerms","reRenderLoading","setReRenderLoading","newTermsDataHandler","newTermsData","length","slice","concat","map","term","termParent","termCanSeePost","getTermsDataHandler","funcIndex","getTermsParams","getTermsData","setInterval","clientHeight","scrollTop","scrollHeight","clearInterval","index","id","ref","key","usersLength","App","userUlRef","userUlTimer","noUsersFound","usersData","totalUsers","setCurrentUser","allUsers","setAllUsers","newUsersDataHandler","newUsersData","user","getUsersData","newCurrentUser","newUsers","window","addEventListener","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gQAkBeA,MAhBf,SAAsBC,GAMpB,OACE,wBACEC,UAAW,uCAA0CD,EAAME,SAASC,SAAW,UAAY,KAAOH,EAAMI,WAAa,YAAc,IACnIC,QAAS,SAAAC,GANXN,EAAMO,kBAAN,2BAA4BP,EAAME,UAAlC,IAA4CM,OAAQR,EAAMQ,YAQxD,4BAAQP,UAAU,uDAAuDD,EAAME,SAASO,YCE/EC,MAbf,SAAqBV,GACnB,OACI,4BACEC,UAAW,2BAA6BD,EAAMW,SAAW,YAAc,IACvEN,QAAS,SAAAC,GAAC,OAAIN,EAAMK,QAAQC,IAC5BM,MAAOZ,EAAMY,QAAS,GAEtB,yBAAKX,UAAU,iCACf,yBAAKA,UAAU,oCCVZY,EAAkB,WAEzB,IAAIC,EAAO,aAYPC,EAAO,SAAUC,EAAQC,EAAKC,EAAQC,GAEtC,IAAIC,EAAM,IAAIC,eACdC,EAASL,EACTM,EAAOL,EAEPF,GAAU,IADM,CAAC,MAAO,QACMQ,QAASR,GAAWA,EAAS,MAE3DI,EAAIK,KAAMT,EAAQM,GAAW,QAAUN,EAAS,IAAMO,EAAO,KAAM,GAE9D,SAAWP,GACZI,EAAIM,iBAAkB,eAAgB,qCAE1CN,EAAIM,iBAAkB,mBAAmB,kBAEzCN,EAAIO,mBAAqB,WAChB,IAAMP,EAAIQ,YAAc,KAAOR,EAAIS,QAAU,IAAMT,EAAIS,QACnD,oBAAsBV,GACvBA,EAASW,UAAMC,EAAWC,KAAKC,MAAMb,EAAIc,YAKrDd,EAAIe,KAAQ,SAAWnB,EAASO,EAAO,OAG3C,MAAO,CACHa,IArCM,SAAUnB,EAAKC,EAAQC,GAE7BJ,EAAM,MAAOE,EAAKC,EADlBC,EAAa,oBAAsBA,EAAaA,EAAWL,IAqC3DuB,KAjCO,SAAUpB,EAAKC,EAAQC,GAE9BJ,EAAM,OAAQE,EAAKC,EADnBC,EAAa,oBAAsBA,EAAaA,EAAWL,KAVtC,GA2DhBwB,EAAgB,iBAAwE,IASxFC,EAAuB,GAC9BC,EAAmB,GACnBC,EAAa,SAACC,EAAQvC,GACxB,OAAOmC,IAAkB,yCAA2CI,EAAS,IAAMvC,EAAW,KAE5FwC,EAAmB,SAAnBA,EAAoBT,EAAUQ,EAAQvC,GACxC,GAAgB,OAAb+B,EAsBAK,EAAqBG,KAKxB7B,EAAcuB,IAAKK,EAAWC,EAAQvC,GAAW,GAAIwC,GACrDJ,EAAqBG,IAAU,GAL3BF,EAAiBE,GAAUvC,OApB3B,UAFOoC,EAAqBG,GAEL,YAApBR,EAASU,OAAqB,CAC7B,IAAMC,EAA2C,SAA9BX,EAASY,KAAT,SACbC,EAAWC,SAASd,EAASY,KAAT,QAE1B,OACoB,IAAfD,IAAuD,IAA/BL,EAAiBO,KAC1B,IAAfF,IAAsD,IAA/BL,EAAiBO,IAEzClC,EAAcuB,IAAKK,EAAWM,EAAUP,EAAiBO,IAAY,GAAIJ,eAClEJ,EAAqBQ,gBAIzBR,EAAqBQ,KAuB3BE,EAAuB,GAC9BC,EAAuB,GAC7B,SAASC,EAAaC,EAASC,EAAiBC,GAC5C,OAAOhB,IAAkB,yCAA2Cc,EAAU,IAAMC,EAAkB,IAAMC,EAAc,IAE9H,SAASC,EAAiBrB,EAAUsB,EAAKC,EAAMH,GAC3C,GAAgB,OAAbpB,EAAH,CAwBA,IAAMwB,EAAe,IAAMD,EAAO,IAAMD,EAErCP,EAAqBS,KAKxB7C,EAAcuB,IAAKe,EAAaK,EAAKC,EAAMH,GAAc,GAAIC,GAC7DN,EAAqBS,IAAgB,GALjCR,EAAqBQ,GAAgBJ,OAxBrC,UAFOL,EAAqB,IAAIQ,EAAK,IAAID,GAElB,YAApBtB,EAASU,OAAqB,CAC7B,IAAMe,EAASX,SAASd,EAASY,KAAT,QAClBc,EAAQZ,SAASd,EAASY,KAAT,QACjBe,EAAiD,SAAjC3B,EAASY,KAAT,YAChBY,EAAe,IAAMC,EAAS,IAAMC,EAE1C,OACuB,IAAlBC,IAAkE,IAAvCX,EAAqBQ,KAC9B,IAAlBG,IAAiE,IAAvCX,EAAqBQ,IAEhD7C,EAAcuB,IAAKe,EAAaS,EAAOD,EAAQT,EAAqBQ,IAAgB,GAAIH,eACjFN,EAAqBS,gBAIzBT,EAAqBS,IAsBxC,IAAII,EAAgB,KACdC,EAAmB,SAACrB,EAAQsB,EAAOC,EAAQC,GAC7C,OAAO5B,IAAkB,2CAA6CI,EAAS,IAAMsB,EAAQ,IAAMC,EAAS,IAAMC,GAqBlHC,EAAkB,KAClBC,EAAmB,GACnBC,GAAyB,EAQvBC,EAAyB,SAAzBA,EAA0BpC,EAAUqC,GACtC,GAAgB,OAAbrC,EAGC,OAFAmC,GAAyB,EAEF,kBAAbnC,GAA6C,YAApBA,EAASU,OAGT,qBAApBV,EAASQ,QAChB8B,MAAMxB,SAASd,EAASQ,UACxBM,SAASd,EAASQ,SAAW,GACJ,qBAAlBoB,GACPU,MAAMxB,SAASc,KACfd,SAASc,IAAkB,OAE3BW,QAAQC,IAAI,4BAIbZ,IAAkBd,SAASd,EAASQ,aACnCyB,EAAgBjC,QAIhBrB,EAAcuB,IACV2B,EAAiBK,EAAiB1B,OAAQ0B,EAAiBJ,MAAOI,EAAiBH,OAAQG,EAAiBF,QAC5G,UAAYE,EAAiBO,OAC7BL,QAMZG,QAAQC,IAAI,4BAIbL,IAGHxD,EAAcuB,IACV2B,EAAiBQ,EAAU7B,OAAQ6B,EAAUP,MAAOO,EAAUN,OAAQM,EAAUL,QAChF,UAAYK,EAAUI,OACtBL,GAEJD,GAAyB,IC1OhBO,EACT,yBAAKC,QAAQ,eACT,2BACI,0BAAMC,EAAE,oHAKPC,EACT,yBAAKF,QAAQ,eACT,2BACI,0BAAMC,EAAE,0OCkHLE,MA1Hf,SAAsBhF,GAAQ,IAAD,EAEmBiF,mBAASjF,EAAMkF,SAASC,iBAF3C,mBAEpBA,EAFoB,KAEHC,EAFG,OAGaH,oBAAS,GAHtB,mBAGpBI,EAHoB,KAGNC,EAHM,OAIaL,oBAAS,GAJtB,mBAIpBM,EAJoB,KAINC,EAJM,OAK6BP,oBAAS,GALtC,mBAKpBQ,EALoB,KAKEC,EALF,KAOrBC,EAAeC,kBAAO,GAEtBC,EAAoB,SAACC,GFgGJ,IAACC,EAAQrD,EE/F3BoD,IAAuBX,IACxBC,EAAmBU,GF8FCC,EE3FlB/F,EAAMkF,SAASa,OF2FWrD,EE1F1B1C,EAAMgG,YAAYtD,OF2FtBa,EAAiB,KAAMwC,EAAQrD,EE1F3BoD,IAIDA,GACD9F,EAAMO,kBAAN,2BACKP,EAAMgG,aADX,IAEE7F,SAAU2F,MAgDhB,OAjCAG,qBAAU,YACyB,IAA9BjG,EAAMkG,qBACPL,GAAkB,KAEpB,CAAC7F,EAAMkG,sBAGTD,qBAAU,WAENjG,EAAMkF,SAASiB,aAAe,GAC9BnG,EAAMkF,SAASC,kBAEfG,GAAgB,GAChBK,EAAaS,SAAU,GAGtBpG,EAAMkF,SAASC,iBACmB,OAAhCnF,EAAMqG,uBACPrG,EAAMqG,0BAIV,IAYA,wBAAIpG,UAAW,uCAAyCkF,EAAkB,UAAY,KAAQM,IAAyBF,EAAgB,YAAc,KACnJ,yBAAKtF,UAAU,+BACb,4BACEA,UAAU,sDACVI,QAAS,SAAAC,GAAC,OAhDS,WACzB,IAAMwF,GAAsBX,EAEzBW,GACD9F,EAAMsG,uBAAuBC,SAAS,SAAAC,GAAC,OAAIA,EAAEV,MAG/CD,EAAkBC,GAyCEW,KAEd,yBAAKxG,UAAW,+CAAiDkF,EAAkB,YAAc,MAChGnF,EAAMkF,SAASwB,UAEhB1G,EAAMkF,SAASiB,aAAe,GAC9B,oCACE,4BACElG,UAAU,+BACVI,QAAS,SAAAC,IAtBC,IAAjB+E,GACDC,GAAgB,GAChBE,GAAgB,IAEhBA,GAAiBD,IAmBT3E,MAAM,wBACN+F,YAAWtB,GAAiBI,IAAwB,YAEpD,yBAAKxF,UAAW,uCACXoF,IAAiBI,EAEhB,yBAAKxF,UAAU,kBAEdwF,IAAyBF,EAExBX,EAEAG,MAOfM,GACC,kBAAC,EAAD,CACE9E,kBAAqBP,EAAMO,kBAC3ByF,YAAehG,EAAMgG,YACrBlC,cAAe9D,EAAM8D,cACrBI,OAAUlE,EAAMkF,SAASa,OACzBL,wBAA2BA,EAC3BY,uBAAsB,sBAAQtG,EAAMsG,wBAAd,CAAsCT,IAC5DK,oBAAuBf,EACvByB,cAAiBrB,EACjBc,sBAAyBV,EAAaS,QAAUZ,EAAkB,SC2J7DqB,MA9Qf,SAAuB7G,GAErB,IAAM8G,EAAgBlB,kBAAO5F,EAAM+G,WAC7BC,EAAYpB,iBAAO,MACnBqB,EAAcrB,iBAAO,MACrBsB,EAAetB,kBAAO,GACtBuB,EAAWvB,kBAAO,GAClBwB,EAAcxB,iBAAO,IACrByB,EAAqBzB,iBAAO,GAC5B0B,EAAiB1B,iBAAO,MACxB2B,EAAY3B,iBAAO,CACvB5B,MAAOhE,EAAM+G,UAAY,IAAM,GAC/BrE,OAAQ,EACRwB,OAAQlE,EAAMkE,OACdD,OAAQ,EACRU,OAAQ,GACR6C,WAAY,IAhBc,EAmBYvC,qBAASjF,EAAM+G,WAnB3B,mBAmBrBU,EAnBqB,KAmBPC,EAnBO,OAoBIzC,oBAAS,GApBb,mBAoBrB0C,EApBqB,KAoBXC,EApBW,OAqBI3C,mBAAS,IArBb,mBAqBrB4C,EArBqB,KAqBXC,EArBW,OAsBkB7C,oBAAS,GAtB3B,mBAsBrB8C,EAtBqB,KAsBJC,EAtBI,KAwBtBC,EAAsB,SAACC,GAGtBA,EAAapF,KAAKqF,OAAS,GAE5BZ,EAAUnB,QAAQoB,WAAaxE,SAASkF,EAAaV,YACrDM,EAAYD,EAASO,MAAM,EAAEpF,SAASkF,EAAajE,SAASoE,OAC1DH,EAAapF,KAAKwF,KAAI,SAAAC,GAAI,MACxB,CACExC,OAAQ/C,SAASuF,EAAKxC,QACtBW,SAAU6B,EAAK7B,SACf8B,WAAYxF,SAASuF,EAAKC,YAC1BrD,gBAA0C,MAAzBoD,EAAKpD,gBACtBsD,eAAwC,MAAxBF,EAAKE,eACrBtC,aAAcnD,SAASuF,EAAKpC,sBAOlCe,EAAad,SAAU,EACvBwB,GAAaD,GACbD,GAAgB,KAIhBgB,EAAsB,WAE1B,IAAMC,EAAYvB,EAAYhB,QAAQ+B,OAClC3B,EAAIyB,EACRb,EAAYhB,QAAZ,sBAA0BgB,EAAYhB,SAAtC,CAA+CI,IAE/C,IAAMoC,EAAiB,CACrBlG,OAAQ6E,EAAUnB,QAAQ1D,OAC1BsB,MAAOuD,EAAUnB,QAAQpC,MACzBC,OAAQsD,EAAUnB,QAAQnC,OAC1BC,OAAQqD,EAAUnB,QAAQlC,OAC1BS,OAAQ4C,EAAUnB,QAAQzB,OAC1BxD,SAAU,SAACe,GAEmC,qBAAnCkF,EAAYhB,QAAQuC,IACQ,OAAnCvB,EAAYhB,QAAQuC,IAEpBvB,EAAYhB,QAAQuC,GAAWzG,KAKlClC,EAAM+G,WH6GTjD,GADAM,EG3GuBwE,GH4GUlG,OACjCyB,EAAkBC,EAAiBjD,SAEnCmD,EAAuB,KAAMF,IA3BL,SAACG,GACzBT,EAAgBS,EAAU7B,OAE1B,IAAMzB,EAAO8C,EAAiBQ,EAAU7B,OAAQ6B,EAAUP,MAAOO,EAAUN,OAAQM,EAAUL,QACvFhD,EAAS,UAAYqD,EAAUI,OAErC9D,EAAcuB,IAAInB,EAAKC,GAAQ,SAASgB,GAEb,kBAAbA,GAA6C,YAApBA,EAASU,OAEpCkB,IAAkBd,SAASd,EAASQ,SACpC6B,EAAUpD,SAASe,GAGvBuC,QAAQC,IAAI,+BGhGlBmE,CAAcD,IA2GlB,OAvGA3C,qBAAU,WAEJjG,EAAM+G,YACkB,qBAAhBc,EAAS,IAA+D,qBAAlC7H,EAAM0F,yBACpD1F,EAAM0F,yBAAwB,GAG7ByB,EAASf,UACVmB,EAAUnB,QAAQ1D,OAAS1C,EAAM8D,cACjCqD,EAASf,SAAU,EACnBsB,GAAgB,GAChBgB,MAIDb,EAASM,OAAS,IACnBZ,EAAUnB,QAAQnC,OAAS4D,EAASM,OACpCT,GAAgB,MAGlB,CAACG,IAEH5B,qBAAU,WAELjG,EAAM+G,YAEHU,GAEyB,OAAxBR,EAAYb,UAEba,EAAYb,QAAU0C,aAAY,YAEb9B,EAAUZ,QAAQ2C,aAAe/B,EAAUZ,QAAQ4C,WAAahC,EAAUZ,QAAQ6C,aAEtF,KAEbC,cAAcjC,EAAYb,SAC1Ba,EAAYb,QAAU,KACtBsB,GAAgB,GAChBgB,OAGD,SAKT,CAACjB,EAAaM,IAEhB9B,qBAAU,WAER,GAA8B,OAA3BqB,EAAelB,QAChBkB,EAAelB,SAAU,OAKzB,GAFAmB,EAAUnB,QAAQ1D,OAAS1C,EAAM8D,cAE7B9D,EAAM+G,UAYR,GAAGD,EAAcV,QAAQ,CAIvB,IAFA,IAES+C,EAFa9B,EAAmBjB,QAAU,GAAM,EAAI,EAAIiB,EAAmBjB,QAAU,EAE/D+C,EAAQ/B,EAAYhB,QAAQ+B,OAAQgB,IACjE/B,EAAYhB,QAAQ+C,GAAS,KAE/B9B,EAAmBjB,QAAUgB,EAAYhB,QAAQ+B,OAAS,EAE/B,OAAxBlB,EAAYb,SACb8C,cAAcjC,EAAYb,SAG5Ba,EAAYb,QAAU,KACtBc,EAAad,SAAU,EACvBmB,EAAUnB,QAAQoB,WAAa,EAC/BD,EAAUnB,QAAQnC,OAAS,EAE3B6D,EAAY,IACTL,EACDC,GAAgB,GAEhBM,GAAoBD,QAItBjB,EAAcV,SAAU,EACxBsB,GAAgB,QA/BlBN,EAAYhB,QAAU,KAoC1B,CAACpG,EAAM8D,gBAGP,wBAAIsF,GAAIpJ,EAAM+G,UAAY,oBAAsB,GAAIsC,IAAKrC,EAAW/G,UAAW,qBAAuBD,EAAM4G,cAAgB,WAAa,KAEtIiB,EAASS,KAAK,SAAAC,GAAI,OACjB,kBAAC,EAAD,CACEe,IAAOf,EAAKxC,OACZC,YAAehG,EAAMgG,YACrBzF,kBAAqBP,EAAMO,kBAC3B2E,SAAYqD,EACZjC,uBAA0BtG,EAAMsG,uBAChCJ,oBAAuBlG,EAAMkG,oBAC7BG,sBAAyBrG,EAAMqG,sBAC/BvC,cAAe9D,EAAM8D,mBAKvB9D,EAAM+G,WACNc,EAASM,OAAS,GAClBN,EAASM,OAASZ,EAAUnB,QAAQoB,YACpCV,EAAcV,SAEd,wBAAInG,UAAU,4DACZ,sDACA,yBAAKA,UAAU,mBAKjBD,EAAM+G,WACc,IAApBc,EAASM,QACTjB,EAAad,SACbU,EAAcV,SAEd,yBAAKnG,UAAU,qBACb,kDAKFD,EAAM+G,WACc,IAApBc,EAASM,QACTrB,EAAcV,UACbc,EAAad,SAEd,yBAAKnG,UAAU,qBACb,yBAAKA,UAAU,mBAKjBD,EAAM+G,WACN/G,EAAMuJ,YAAc,IACnBzC,EAAcV,SAEf,yBAAKnG,UAAU,qBACb,+CAKDD,EAAM+G,WACPc,EAASM,OAASZ,EAAUnB,QAAQoB,YACpCV,EAAcV,SAEd,wBAAInG,UAAU,oEACXwH,EAEC,yBAAKxH,UAAU,kBAEf,4BACEI,QAAS,SAAAC,GACPoH,GAAgB,GAChBgB,MAGD3D,EACD,+CChECyE,MAlMf,WAEE,IAAMC,EAAY7D,iBAAO,MACnB8D,EAAc9D,iBAAO,MACrB+D,EAAe/D,kBAAO,GACtBgE,EAAYhE,iBAAO,CACvB5B,MAAO,IACPC,OAAQ,EACR4F,WAAY,EACZlF,OAAQ,KATG,EAY2BM,oBAAS,GAZpC,mBAYNwC,EAZM,KAYQC,EAZR,OAamBzC,oBAAS,GAb5B,mBAaN0C,EAbM,KAaIC,EAbJ,OAcyB3C,mBAAS,IAdlC,mBAcNe,EAdM,KAcO8D,EAdP,OAemB7E,mBAAS,IAf5B,mBAeN8E,EAfM,KAeIC,EAfJ,KAiBPC,EAAsB,SAACC,GAGxBA,EAAapH,KAAKqF,OAAS,GAE5ByB,EAAUxD,QAAQyD,WAAaK,EAAaL,WAC5CG,EAAY,GAAD,mBACND,GADM,YAENG,EAAapH,KAAKwF,KAAI,SAAA6B,GAAI,MAAK,CAChCzH,OAAQM,SAASmH,EAAKzH,QACtBjC,SAAU0J,EAAK1J,SACfN,SAA4B,MAAlBgK,EAAKhK,kBAMnBwJ,EAAavD,SAAU,EACvBwB,GAAaD,KAIjB1B,qBAAU,WAEL8D,EAAS5B,OAAS,IACnByB,EAAUxD,QAAQnC,OAAS8F,EAAS5B,OACpCT,GAAgB,MAGlB,CAACqC,IAEH9D,qBAAU,WAEJwB,GAEyB,OAAxBiC,EAAYtD,UAEbsD,EAAYtD,QAAU0C,aAAY,YAEXW,EAAUrD,QAAQ2C,aAAeU,EAAUrD,QAAQ4C,WAAaS,EAAUrD,QAAQ6C,aAEtF,KAEbC,cAAcQ,EAAYtD,SAC1BsD,EAAYtD,QAAU,KACtBsB,GAAgB,GJtBF,SAAC1D,EAAOC,EAAQ9C,GACxC,IAAMF,EAAOqB,IAAkB,sCAAwC0B,EAAQ,IAAMC,EAErFpD,EAAcuB,IAAInB,EADH,WACgB,SAASiB,GACb,kBAAbA,GAA6C,YAApBA,EAASU,OACxCzB,EAASe,GAETuC,QAAQC,IAAI,+BIgBV0F,CAAaR,EAAUxD,QAAQpC,MAAO4F,EAAUxD,QAAQnC,OAAQgG,MAInE,QAKP,CAACxC,IAEH,IAAMlH,EAAoB,SAAC8J,GACzB,GAAiC,qBAAvBrE,EAAYtD,OAEpBoH,EAAeO,QAIf,GAAGA,EAAe3H,SAAWsD,EAAYtD,OACvCoH,EAAeO,QAEX,GAAGA,EAAelK,WAAa6F,EAAY7F,SAAS,CAExD,IAAMmK,EAAWP,EAAS3B,QAES,qBAA1BiC,EAAe7J,QACtB8J,EAASD,EAAe7J,QAAQkC,SAAW2H,EAAe3H,QAG1D4H,EAASD,EAAe7J,QAAQL,SAAWkK,EAAelK,SAC1D6J,EAAYM,IAIZN,EACED,EAASzB,KAAI,SAAA6B,GACX,OAAGA,EAAKzH,SAAW2H,EAAe3H,OACzB,2BAAIyH,GAAX,IAAiBhK,SAAUkK,EAAelK,WAEnCgK,MJ5CGzH,EIoDhB2H,EAAe3H,OJpDSvC,EIqDxBkK,EAAelK,SJpDrBwC,EAAiB,KAAMD,EAAQvC,GIuD3B2J,EAAeO,GJxDE,IAAC3H,EAAQvC,GI6DhC,OACE,oCACE,yBAAKiJ,GAAG,yBAAyBnJ,UAAU,4BACzC,yBAAKmJ,GAAG,iCAAiCnJ,UAAW,6BAA+B+F,EAAYtD,OAAS,iBAAmB,KACvH,wBAAI0G,GAAG,uBAAuBnJ,UAAU,wBACrC+F,EAAYvF,UAAY,WAExBuF,EAAYtD,QACb,kBAAC,EAAD,CACE9B,MAAM,2BACND,WAAUqF,EAAY7F,SACtBE,QAAS,SAAAC,GAAC,OAAIC,EAAkB,2BAC3ByF,GAD0B,IAE7B7F,UAAW6F,EAAY7F,gBAKjC,wBAAIiJ,GAAG,oBAAoBnJ,UAAU,oBAAoBoJ,IAAKI,GAC3DM,EAASzB,KAAI,SAAC6B,EAAM3J,GAAP,OACZ,kBAAC,EAAD,CACE8I,IAAKa,EAAKzH,OACVnC,kBAAmBA,EACnBC,OAAQA,EACRN,SAAYiK,EACZ/J,WAAY4F,EAAYtD,SAAWyH,EAAKzH,aAIzCiH,EAAavD,SACd2D,EAAS5B,OAAS,GAClB4B,EAAS5B,OAASyB,EAAUxD,QAAQyD,YAEpC,wBAAI5J,UAAU,4DACZ,iDACA,yBAAKA,UAAU,oBAIhB0J,EAAavD,SACM,IAApB2D,EAAS5B,QAET,yBAAKlI,UAAU,qBACb,yBAAKA,UAAU,mBAIjB0J,EAAavD,SACO,IAApB2D,EAAS5B,QAET,yBAAKlI,UAAU,qBACb,6CACA,qEAMR,yBAAKmJ,GAAG,yBAAyBnJ,UAAU,4BACzC,kBAAC,EAAD,CACEM,kBAAmBA,EACnByF,YAAaA,EACblC,cAAekC,EAAYtD,OAC3BwB,OAAQ,EACR6C,WAAW,EACXT,uBAA0B,GAC1BJ,oBAAuB,KACvBG,sBAAyB,KACzBkD,YAAeQ,EAAS5B,YC3LlCoC,OAAOC,iBAAiB,QAAQ,SAAClK,GAE/BmK,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,qC","file":"static/js/main.ece45270.chunk.js","sourcesContent":["import React from 'react';\n\nfunction UserSelector(props) {\n\n  const buttonClickHandler = () => {\n    props.changeCurrentUser({...props.userData, arrKey: props.arrKey});\n  };\n\n  return (\n    <li\n      className={\"resautcat-user-li resautcat-type-li\"  + (props.userData.isActive ? ' active' : '') + (props.isSelected ? ' selected' : '')}\n      onClick={e => buttonClickHandler(e)}\n    >\n      <button className=\"resautcat-user-name resautcat-type-button-container\">{props.userData.userName}</button>\n    </li>\n  );\n}\n\nexport default UserSelector;","import React  from 'react';\n\nfunction OnOffButton(props) {\n  return (\n      <button\n        className={\"resautcat-on-off-button\" + (props.selected ? ' selected' : '')}\n        onClick={e => props.onClick(e)}\n        title={props.title || false}\n      >\n        <div className=\"resautcat-on-off-button-back\"></div>\n        <div className=\"resautcat-on-off-button-round\"></div>\n      </button>\n  );\n}\n\nexport default OnOffButton;","export var resautcatAjax = ( function(){\r\n\r\n    var noop = function(){};\r\n\r\n    var get = function( url, params, callback ){\r\n        callback = ( 'function' === typeof callback ) ? callback : noop;\r\n        ajax( \"GET\", url, params, callback );\r\n    };\r\n\r\n    var post = function( url, params, callback ){\r\n        callback = ( 'function' === typeof callback ) ? callback : noop;\r\n        ajax( \"POST\", url, params, callback );\r\n    };\r\n\r\n    var ajax = function( method, url, params, callback ){\r\n        /* Create XMLHttpRequest object and set variables */\r\n        var xhr = new XMLHttpRequest(),\r\n        target = url,\r\n        args = params,\r\n        valid_methods = [\"GET\", \"POST\"];\r\n        method = -1 !== valid_methods.indexOf( method ) ? method : \"GET\";\r\n        /* Set request method and target URL */\r\n        xhr.open( method, target + ( \"GET\" === method ? '?' + args : '' ), true );\r\n        /* Set request headers */\r\n        if ( \"POST\" === method ) {\r\n            xhr.setRequestHeader( \"Content-type\", \"application/x-www-form-urlencoded\" );\r\n        }\r\n        xhr.setRequestHeader( \"X-Requested-With\",\"XMLHttpRequest\" );\r\n        /* Hook into onreadystatechange */\r\n        xhr.onreadystatechange = function() {\r\n            if ( 4 === xhr.readyState && 200 <= xhr.status && 300 > xhr.status ) {\r\n                if ( 'function' === typeof callback ) {\r\n                    callback.call( undefined, JSON.parse(xhr.response) );\r\n                }\r\n            }\r\n        };\r\n        /* Send request */\r\n        xhr.send( ( \"POST\" === method ? args : null ) );\r\n    };\r\n\r\n    return {\r\n        get: get,\r\n        post: post\r\n    };\r\n\r\n} )();\r\n\r\nexport const getUsersData = (quant, offset, callback) => {\r\n    const url =  getHostDomain() + '/wp-json/resautcat_api_admin/users/' + quant + '/' + offset;\r\n    const params = 'search=';\r\n    resautcatAjax.get(url, params, function(response){\r\n        if(typeof response === \"object\" && response.result === 'success'){\r\n            callback(response);\r\n        }else{\r\n            console.log('Error on GET users on DB');\r\n        }\r\n    });\r\n}\r\n\r\nexport const getHostDomain = () => process.env.NODE_ENV === 'development' ? 'http://fndnovo.local' : '';\r\n\r\n\r\n/**\r\n * Activate/Deactivate User on DB\r\n */\r\nexport const setUserDB = (userId, isActive) => {    \r\n    setUserDBHandler(null, userId, isActive);\r\n}\r\nexport const waitingResponseUsers = {};\r\nconst modifiedIsActive = {};\r\nconst setUserUrl = (userId, isActive) => {\r\n    return getHostDomain() + '/wp-json/resautcat_api_admin/set_user/' + userId + '/' + isActive + '/';\r\n}\r\nconst setUserDBHandler = (response, userId, isActive) => {\r\n    if(response !== null){\r\n        delete waitingResponseUsers[userId];\r\n\r\n        if(response.result === 'success'){\r\n            const dbIsActive = response.data['isActive'] === 'true' ? true : false;\r\n            const dbUserId = parseInt(response.data['userId']);\r\n\r\n            if(\r\n                (dbIsActive === false && modifiedIsActive[dbUserId] === true) ||\r\n                (dbIsActive === true && modifiedIsActive[dbUserId] === false) \r\n            ){\r\n                resautcatAjax.get( setUserUrl(dbUserId, modifiedIsActive[dbUserId]), '', setUserDBHandler );\r\n                delete waitingResponseUsers[dbUserId];\r\n                return;\r\n            }\r\n\r\n            delete waitingResponseUsers[dbUserId];\r\n            return;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if(waitingResponseUsers[userId]){\r\n        modifiedIsActive[userId] = isActive;\r\n        return;\r\n    }\r\n    \r\n    resautcatAjax.get( setUserUrl(userId, isActive), '', setUserDBHandler );\r\n    waitingResponseUsers[userId] = true;\r\n    modifiedIsActive[userId] = isActive;\r\n}\r\n\r\n\r\n/**\r\n * Activate/Deactivate Terms on DB\r\n */\r\nexport const setTermDB = (termId, userId, canEditPost) => {    \r\n    setTermDBHandler(null, termId, userId, canEditPost);\r\n}\r\nexport const waitingResponseTerms = {};\r\nconst modified_caneditpost = {};\r\nfunction set_term_url(term_id, current_user_id, caneditpost){\r\n    return getHostDomain() + '/wp-json/resautcat_api_admin/set_term/' + term_id + '/' + current_user_id + '/' + caneditpost + '/'; \r\n}\r\nfunction setTermDBHandler(response, tid, cuid, caneditpost){ // tid = term_id | cuid = current_user_id\r\n    if(response !== null){\r\n        delete waitingResponseTerms['u'+cuid+'t'+tid];\r\n\r\n        if(response.result === 'success'){\r\n            const dbcuid = parseInt(response.data['userid']);\r\n            const dbtid = parseInt(response.data['termid']);\r\n            const dbcaneditpost = response.data['caneditpost'] === 'true' ? true : false;\r\n            const set_term_uid = 'u' + dbcuid + 't' + dbtid;\r\n\r\n            if(\r\n                (dbcaneditpost === false && modified_caneditpost[set_term_uid] === true) ||\r\n                (dbcaneditpost === true && modified_caneditpost[set_term_uid] === false)\r\n            ){\r\n                resautcatAjax.get( set_term_url(dbtid, dbcuid, modified_caneditpost[set_term_uid]), '', setTermDBHandler );\r\n                delete waitingResponseTerms[set_term_uid];\r\n                return;\r\n            }\r\n\r\n            delete waitingResponseTerms[set_term_uid];\r\n            return;\r\n        }\r\n        return;\r\n    }\r\n\r\n    const set_term_uid = 'u' + cuid + 't' + tid;\r\n\r\n    if(waitingResponseTerms[set_term_uid]){\r\n        modified_caneditpost[set_term_uid] = caneditpost;\r\n        return;\r\n    }\r\n    \r\n    resautcatAjax.get( set_term_url(tid, cuid, caneditpost), '', setTermDBHandler );\r\n    waitingResponseTerms[set_term_uid] = true;\r\n    modified_caneditpost[set_term_uid] = caneditpost;\r\n}\r\n\r\n\r\n/**\r\n * Search Categories on DB\r\n */\r\nlet currentUserId = null;\r\nconst getCategoriesUrl = (userId, quant, offset, parent) => {\r\n    return getHostDomain() + '/wp-json/resautcat_api_admin/categories/' + userId + '/' + quant + '/' + offset + '/' + parent; \r\n}\r\nexport const getTermsData = (queryData) => {\r\n    currentUserId = queryData.userId;\r\n\r\n    const url =  getCategoriesUrl(queryData.userId, queryData.quant, queryData.offset, queryData.parent); \r\n    const params = 'search=' + queryData.search;\r\n\r\n    resautcatAjax.get(url, params, function(response){\r\n\r\n        if(typeof response === \"object\" && response.result === 'success'){\r\n\r\n            if( currentUserId === parseInt(response.userId) ){\r\n                queryData.callback(response);\r\n            }\r\n        }else{\r\n            console.log('Error on GET terms on DB');\r\n        }\r\n    });\r\n}\r\n\r\nlet primaryCallback = null;\r\nlet primaryQueryData = {};\r\nlet waitingPrimaryResponse = false;\r\nexport const getTermsDataPrimary = (queryData) => {\r\n    primaryQueryData = queryData;\r\n    currentUserId = primaryQueryData.userId;\r\n    primaryCallback = primaryQueryData.callback;\r\n\r\n    getCategoriesDBHandler(null, primaryQueryData);\r\n}\r\nconst getCategoriesDBHandler = (response, queryData) => {\r\n    if(response !== null){\r\n        waitingPrimaryResponse = false;\r\n        \r\n        if(typeof response === \"object\" && response.result === 'success'){\r\n\r\n            if(\r\n                typeof response.userId === \"undefined\" ||\r\n                isNaN(parseInt(response.userId)) ||\r\n                parseInt(response.userId) <= 0 ||\r\n                typeof currentUserId === \"undefined\" ||\r\n                isNaN(parseInt(currentUserId)) ||\r\n                parseInt(currentUserId) <= 0\r\n            ){\r\n                console.log('Error on GET terms on DB');\r\n                return;\r\n            }\r\n\r\n            if(currentUserId === parseInt(response.userId)){\r\n                primaryCallback(response);\r\n                return;\r\n            }else{\r\n\r\n                resautcatAjax.get(\r\n                    getCategoriesUrl(primaryQueryData.userId, primaryQueryData.quant, primaryQueryData.offset, primaryQueryData.parent),\r\n                    'search=' + primaryQueryData.search,\r\n                    getCategoriesDBHandler\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        console.log('Error on GET terms on DB');\r\n        return;\r\n    }\r\n\r\n    if(waitingPrimaryResponse)\r\n        return;\r\n    \r\n    resautcatAjax.get(\r\n        getCategoriesUrl(queryData.userId, queryData.quant, queryData.offset, queryData.parent),\r\n        'search=' + queryData.search,\r\n        getCategoriesDBHandler\r\n    );\r\n    waitingPrimaryResponse = true;\r\n}\r\n\r\nlet xtyle = null;\r\nexport const setXtyle = (style) => {\r\n    if(typeof style === 'object' && xtyle === null){\r\n        xtyle = style;\r\n    }\r\n}\r\nexport const getXtyle = (styleStr) => {\r\n    return styleStr;\r\n\r\n    // if(xtyle === null)\r\n    //     return 'style-not-set';\r\n    \r\n    // if(typeof(styleStr).toLowerCase() !== 'string')\r\n    //     return 'string-not-passed';\r\n\r\n    // let returnStyle = '';\r\n    // styleStr.split(' ').forEach(stl => {\r\n    //     const stlToGet = stl.trim();\r\n    //     if(stlToGet !== ''){\r\n    //         returnStyle += xtyle[stlToGet] + ' '\r\n    //     }\r\n    // });\r\n\r\n    // return returnStyle.trim();\r\n};","import React from 'react';\r\n\r\nexport const minusSvg = (\r\n    <svg viewBox=\"0 0 512 512\">\r\n        <g>\r\n            <path d=\"M492,236H20c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h472c11.046,0,20-8.954,20-20S503.046,236,492,236z\"/>\r\n        </g>\r\n    </svg>\r\n)\r\n\r\nexport const plusSvg = (\r\n    <svg viewBox=\"0 0 512 512\">\r\n        <g>\r\n            <path d=\"M492,236H276V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v216H20c-11.046,0-20,8.954-20,20s8.954,20,20,20h216    v216c0,11.046,8.954,20,20,20s20-8.954,20-20V276h216c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z\"/>\r\n        </g>\r\n    </svg>\r\n)","import React, { useEffect, useState, useRef } from 'react';\nimport { minusSvg, plusSvg } from './svgIcons';\nimport TermContainer from './TermContainer';\nimport { setTermDB } from './resources';\n\nfunction TermSelector(props) {\n\n  const [termCanEditPost, setTermCanEditPost] = useState(props.termData.termCanEditPost);\n  const [loadChildren, setLoadChildren] = useState(false);\n  const [hideChildren, setHideChildren] = useState(true);\n  const [childrenDataIsLoaded, setChildrenDataIsLoaded] = useState(false);\n\n  const unhideParent = useRef(false);\n\n  const changeCanEditPost = (newTermCanEditPost) => {\n    if(newTermCanEditPost !== termCanEditPost){\n      setTermCanEditPost(newTermCanEditPost);\n\n      setTermDB(\n        props.termData.termId,\n        props.currentUser.userId,\n        newTermCanEditPost\n      );\n    }\n\n    if(newTermCanEditPost){\n      props.changeCurrentUser({\n        ...props.currentUser,\n        isActive: newTermCanEditPost\n      })\n    }\n  }\n\n  const buttonClickHandler = () => {\n    const newTermCanEditPost = !termCanEditPost;\n\n    if(newTermCanEditPost){\n      props.chainChangeCanEditPost.forEach( f => f(newTermCanEditPost) );\n    }\n\n    changeCanEditPost(newTermCanEditPost);\n  };\n\n  useEffect(()=>{\n    if(props.prevTermCanEditPost === false){\n      changeCanEditPost(false);\n    }\n  },[props.prevTermCanEditPost])\n\n  // auto load children\n  useEffect(()=>{\n    if(\n      props.termData.termChildren > 0 &&\n      props.termData.termCanEditPost\n    ){\n      setLoadChildren(true);\n      unhideParent.current = true;\n    }\n\n    if(props.termData.termCanEditPost){\n      if(props.parentSetHideChildren !== null){\n        props.parentSetHideChildren();\n      }\n    }\n\n  },[]);\n\n  const expandChildren = () => {\n    if(loadChildren === false){\n      setLoadChildren(true);\n      setHideChildren(false);\n    }else{\n      setHideChildren(!hideChildren);\n    }\n  }\n\n  return (\n    <li className={\"resautcat-term-li resautcat-type-li\" + (termCanEditPost ? ' active' : '') + ((childrenDataIsLoaded && !hideChildren) ? ' expanded' : '')}>\n      <div className=\"resautcat-term-li-container\">\n        <button\n          className=\"resautcat-term-name resautcat-type-button-container\"\n          onClick={e => buttonClickHandler(e)}\n        >\n          <div className={\"resautcat-term-button resautcat-type-button\" + (termCanEditPost ? ' selected' : '')}></div>\n          {props.termData.termName}\n        </button>\n        {(props.termData.termChildren > 0) && (\n          <>\n            <button\n              className=\"resautcat-term-expand-button\"\n              onClick={e => expandChildren(e)}\n              title=\"Expand Sub-Categories\"\n              disabled={(loadChildren && !childrenDataIsLoaded) ? 'disabled' : false}\n            >\n              <div className={\"resautcat-term-expand-svg-container\"}>\n                { (loadChildren && !childrenDataIsLoaded)\n                  ?\n                    <div className=\"lds-dual-ring\"></div>\n                  :\n                    (childrenDataIsLoaded && !hideChildren)\n                    ?\n                      minusSvg\n                    :\n                      plusSvg\n                }\n              </div>\n            </button>\n          </>\n        )}\n      </div>\n      {loadChildren && (\n        <TermContainer\n          changeCurrentUser = {props.changeCurrentUser}\n          currentUser = {props.currentUser}\n          currentUserId={props.currentUserId}\n          parent = {props.termData.termId}\n          setChildrenDataIsLoaded = {setChildrenDataIsLoaded}\n          chainChangeCanEditPost = {[...props.chainChangeCanEditPost, changeCanEditPost]}\n          prevTermCanEditPost = {termCanEditPost}\n          hideContainer = {hideChildren}\n          parentSetHideChildren = {unhideParent.current ? setHideChildren : null}\n        />\n      )}\n    </li>\n  );\n}\n\nexport default TermSelector;","import React, { useState, useEffect, useRef } from 'react';\nimport { getTermsData, getTermsDataPrimary } from './resources';\nimport TermSelector from './TermSelector';\nimport { plusSvg } from './svgIcons';\n\nfunction TermContainer(props) {\n\n  const hasLoadedUser = useRef(props.isPrimary ? false : true);\n  const termUlRef = useRef(null);\n  const termUlTimer = useRef(null);\n  const noTermsFound = useRef(false);\n  const firstRun = useRef(true); // only for sub-container\n  const allGetTerms = useRef([]); // only for sub-container\n  const allGetTermsTracker = useRef(0); // only for sub-container\n  const hasChangedUser = useRef(null);\n  const termsData = useRef({\n    quant: props.isPrimary ? 200 : 10,\n    userId: 0,\n    parent: props.parent,\n    offset: 0,\n    search: '',\n    totalTerms: 0 // only for sub-container\n  });\n  \n  const [loadingState, setLoadingState] = useState(props.isPrimary ? true : false); // false = auto loading on mount\n  const [reRender, setReRender] = useState(false);\n  const [allTerms, setAllTerms] = useState([]);\n  const [reRenderLoading, setReRenderLoading] = useState(false);\n\n  const newTermsDataHandler = (newTermsData) => {\n\n      // there could be more terms to load\n      if(newTermsData.data.length > 0){\n\n        termsData.current.totalTerms = parseInt(newTermsData.totalTerms);\n        setAllTerms(allTerms.slice(0,parseInt(newTermsData.offset)).concat(\n          newTermsData.data.map(term => (\n            {\n              termId: parseInt(term.termId),\n              termName: term.termName,\n              termParent: parseInt(term.termParent),\n              termCanEditPost: term.termCanEditPost === '1' ? true : false,\n              termCanSeePost: term.termCanSeePost === '1' ? true : false,\n              termChildren: parseInt(term.termChildren)\n            }\n          ))\n        ));\n\n      // no more terms to load\n      }else{\n        noTermsFound.current = true;\n        setReRender(!reRender);\n        setLoadingState(true);\n      }\n  }\n\n  const getTermsDataHandler = () => {\n\n    const funcIndex = allGetTerms.current.length;\n    var f = newTermsDataHandler;\n    allGetTerms.current = [...allGetTerms.current, f];\n\n    const getTermsParams = {\n      userId: termsData.current.userId,\n      quant: termsData.current.quant,\n      offset: termsData.current.offset,\n      parent: termsData.current.parent,\n      search: termsData.current.search,\n      callback: (response) => {\n        if(\n          typeof allGetTerms.current[funcIndex] !== 'undefined' &&\n          allGetTerms.current[funcIndex] !== null\n        ){\n          allGetTerms.current[funcIndex](response);\n        }\n      }\n    }\n\n    if(props.isPrimary){\n      getTermsDataPrimary( getTermsParams );\n    }else{\n      getTermsData( getTermsParams );\n    }\n  }\n\n  useEffect(()=>{\n    \n    if(!props.isPrimary){\n      if(typeof allTerms[0] !== 'undefined' && typeof props.setChildrenDataIsLoaded !== 'undefined'){\n        props.setChildrenDataIsLoaded(true);\n      }\n\n      if(firstRun.current){\n        termsData.current.userId = props.currentUserId;\n        firstRun.current = false;\n        setLoadingState(true);\n        getTermsDataHandler();\n      }\n    }\n\n    if(allTerms.length > 0){\n      termsData.current.offset = allTerms.length;\n      setLoadingState(false);\n    }\n\n  },[allTerms]);\n\n  useEffect(()=>{\n\n    if(props.isPrimary){\n\n      if(!loadingState){\n\n        if(termUlTimer.current === null){\n  \n          termUlTimer.current = setInterval(()=> {\n            \n            const scrollPos = (termUlRef.current.clientHeight + termUlRef.current.scrollTop) / termUlRef.current.scrollHeight;\n  \n            if(scrollPos > 0.8){\n              \n              clearInterval(termUlTimer.current);\n              termUlTimer.current = null;\n              setLoadingState(true);\n              getTermsDataHandler();\n\n            }\n          }, 100);\n        }\n      }\n    }\n\n  },[loadingState,reRenderLoading])\n\n  useEffect(()=>{\n\n    if(hasChangedUser.current === null){ // componentDidMount\n      hasChangedUser.current = false;\n    }else{\n\n      termsData.current.userId = props.currentUserId;\n\n      if(!props.isPrimary){ // se não for primary, não precisa resetar, é só definir o usuário como alterado\n\n        // const trackerIndex = (allGetTermsTracker.current - 1) <= 0 ? 0 : allGetTermsTracker.current - 1;\n        // // reset functions\n        // for (let index = trackerIndex; index < allGetTerms.current.length; index++) {\n        //   allGetTerms.current[index] = null;\n        // }\n        // allGetTermsTracker.current = allGetTerms.current.length - 1;\n        allGetTerms.current = [];\n\n      }else{ // se for primary, primeiro eu tenho que ver se algum usuário está carregado\n\n        if(hasLoadedUser.current){\n          \n          const trackerIndex = (allGetTermsTracker.current - 1) <= 0 ? 0 : allGetTermsTracker.current - 1;\n          // reset functions\n          for (let index = trackerIndex; index < allGetTerms.current.length; index++) {\n            allGetTerms.current[index] = null;\n          }\n          allGetTermsTracker.current = allGetTerms.current.length - 1;\n\n          if(termUlTimer.current !== null){\n            clearInterval(termUlTimer.current);\n          }\n\n          termUlTimer.current = null;\n          noTermsFound.current = false;\n          termsData.current.totalTerms = 0;\n          termsData.current.offset = 0;\n\n          setAllTerms([]);\n          if(loadingState){\n            setLoadingState(false);\n          }else{\n            setReRenderLoading(!reRenderLoading);\n          }\n  \n        }else{ // carregou o primeiro usuário\n          hasLoadedUser.current = true;\n          setLoadingState(false); // chamar o useEffect do loadingState\n        }\n      }\n    }\n\n  },[props.currentUserId]);\n\n  return (\n    <ul id={props.isPrimary ? \"resautcat-term-ul\" : ''} ref={termUlRef} className={\"resautcat-type-ul\" + (props.hideContainer ? ' hide-ul' : '')}>\n\n      {allTerms.map( term => (\n        <TermSelector\n          key = {term.termId}\n          currentUser = {props.currentUser}\n          changeCurrentUser = {props.changeCurrentUser}\n          termData = {term}\n          chainChangeCanEditPost = {props.chainChangeCanEditPost}\n          prevTermCanEditPost = {props.prevTermCanEditPost}\n          parentSetHideChildren = {props.parentSetHideChildren}\n          currentUserId={props.currentUserId}\n        />\n      ))}\n\n      {(\n        props.isPrimary &&\n        allTerms.length > 0 &&\n        allTerms.length < termsData.current.totalTerms &&\n        hasLoadedUser.current\n      ) && (\n        <li className=\"resautcat-term-li resautcat-type-li resautcat-loading-li\">\n          <button>Loading Categories</button>\n          <div className=\"lds-dual-ring\"></div>\n        </li>\n      )}\n\n      {(\n        props.isPrimary &&\n        allTerms.length === 0 &&\n        noTermsFound.current &&\n        hasLoadedUser.current\n      ) && (\n        <div className=\"resautcat-message\">\n          <h3>No Category Found</h3>\n        </div>\n      )}\n\n      {(\n        props.isPrimary &&\n        allTerms.length === 0 &&\n        hasLoadedUser.current &&\n        !noTermsFound.current\n      ) && (\n        <div className=\"resautcat-message\">\n          <div className=\"lds-dual-ring\"></div>\n        </div>\n      )}\n\n      {(\n        props.isPrimary &&\n        props.usersLength > 0 &&\n        !hasLoadedUser.current\n      ) && (\n        <div className=\"resautcat-message\">\n          <h3>Select a User</h3>\n        </div>\n      )}\n\n      {(\n        !props.isPrimary &&\n        allTerms.length < termsData.current.totalTerms &&\n        hasLoadedUser.current\n      ) && (\n        <li className=\"resautcat-term-li resautcat-type-li resautcat-load-more-terms-li\">\n          {loadingState\n          ?\n            <div className=\"lds-dual-ring\"></div>\n          :\n            <button\n              onClick={e => {\n                setLoadingState(true);\n                getTermsDataHandler();\n              }}\n            >\n              {plusSvg}\n              <span>Load More</span>\n            </button>\n          }\n        </li>\n      )}\n\n    </ul>\n  );\n}\n\nexport default TermContainer;","import React, { useState, useEffect, useRef} from 'react';\nimport './admin-page.css';\nimport UserSelector from './UserSelector';\nimport OnOffButton from './OnOffButton';\nimport { getUsersData, setUserDB } from './resources';\nimport TermContainer from './TermContainer';\n\nfunction App() {\n\n  const userUlRef = useRef(null);\n  const userUlTimer = useRef(null);\n  const noUsersFound = useRef(false);\n  const usersData = useRef({\n    quant: 200,\n    offset: 0,\n    totalUsers: 0,\n    search: ''\n  });\n\n  const [loadingState, setLoadingState] = useState(false);\n  const [reRender, setReRender] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [allUsers, setAllUsers] = useState([]);\n\n  const newUsersDataHandler = (newUsersData) => {\n\n    // there could be more users to load\n    if(newUsersData.data.length > 0){\n\n      usersData.current.totalUsers = newUsersData.totalUsers;\n      setAllUsers([\n        ...allUsers,\n        ...newUsersData.data.map(user => ({\n          userId: parseInt(user.userId),\n          userName: user.userName,\n          isActive: user.isActive === '1' ? true : false\n        }))\n      ]);\n\n    // no more users to load\n    }else{\n      noUsersFound.current = true;\n      setReRender(!reRender);\n    }\n  }\n\n  useEffect(()=>{\n\n    if(allUsers.length > 0){\n      usersData.current.offset = allUsers.length;\n      setLoadingState(false);\n    }\n\n  },[allUsers])\n\n  useEffect(()=>{\n\n    if(!loadingState){\n\n      if(userUlTimer.current === null){\n\n        userUlTimer.current = setInterval(() => {\n\n            const scrollPos = (userUlRef.current.clientHeight + userUlRef.current.scrollTop) / userUlRef.current.scrollHeight;\n\n            if(scrollPos > 0.8){\n\n              clearInterval(userUlTimer.current);\n              userUlTimer.current = null;\n              setLoadingState(true);\n              getUsersData(usersData.current.quant, usersData.current.offset, newUsersDataHandler);\n\n            }\n\n        }, 100);\n        \n      }\n    }\n\n  },[loadingState]);\n\n  const changeCurrentUser = (newCurrentUser) => {\n    if(typeof currentUser.userId === 'undefined'){\n      \n      setCurrentUser(newCurrentUser);\n\n    }else{\n\n      if(newCurrentUser.userId !== currentUser.userId){\n        setCurrentUser(newCurrentUser);\n\n      }else if(newCurrentUser.isActive !== currentUser.isActive){\n\n        const newUsers = allUsers.slice();\n        if(\n          typeof newCurrentUser.arrKey !== \"undefined\" &&\n          newUsers[newCurrentUser.arrKey].userId === newCurrentUser.userId\n        ){\n\n          newUsers[newCurrentUser.arrKey].isActive = newCurrentUser.isActive;\n          setAllUsers(newUsers);\n\n        }else{\n\n          setAllUsers(\n            allUsers.map(user => {\n              if(user.userId === newCurrentUser.userId){\n                return {...user, isActive: newCurrentUser.isActive};\n              }else{\n                return user;\n              }\n            })\n          );\n\n        }\n\n        setUserDB(\n          newCurrentUser.userId,\n          newCurrentUser.isActive\n        );\n\n        setCurrentUser(newCurrentUser);\n      }\n    }\n  }\n\n  return (\n    <>\n      <div id=\"resautcat-content-user\" className=\"resautcat-type-container\">\n        <div id=\"resautcat-user-title-container\" className={\"resautcat-title-container\" + (currentUser.userId ? ' selected-user' : '')}>\n            <h3 id=\"resautcat-user-title\" className=\"resautcat-type-title\">\n              {currentUser.userName || 'Users'}\n            </h3>\n            {!!currentUser.userId && (\n              <OnOffButton\n                title=\"Activate/Deactivate User\"\n                selected={currentUser.isActive ? true : false}\n                onClick={e => changeCurrentUser({\n                  ...currentUser,\n                  isActive: !currentUser.isActive\n                })}\n              />\n            )}\n        </div>\n        <ul id=\"resautcat-user-ul\" className=\"resautcat-type-ul\" ref={userUlRef}>\n          {allUsers.map((user, arrKey) => (\n            <UserSelector\n              key={user.userId}\n              changeCurrentUser={changeCurrentUser}\n              arrKey={arrKey}\n              userData = {user}\n              isSelected={currentUser.userId === user.userId ? true : false}\n            />\n          ))}\n          {(\n            !noUsersFound.current &&\n            allUsers.length > 0 &&\n            allUsers.length < usersData.current.totalUsers\n          ) && (\n            <li className=\"resautcat-user-li resautcat-type-li resautcat-loading-li\">\n              <button>Loading Users</button>\n              <div className=\"lds-dual-ring\"></div>\n            </li>\n          )}\n          {(\n            !noUsersFound.current &&\n            allUsers.length === 0\n          ) && (\n            <div className=\"resautcat-message\">\n              <div className=\"lds-dual-ring\"></div>\n            </div>\n          )}\n          {(\n            noUsersFound.current &&\n            allUsers.length === 0\n          ) && (\n            <div className=\"resautcat-message\">\n              <h3>No User Found</h3>\n              <p>You can only select non-admin users</p>\n            </div>\n          )}\n        </ul>\n      </div>\n\n      <div id=\"resautcat-content-term\" className=\"resautcat-type-container\">\n        <TermContainer\n          changeCurrentUser={changeCurrentUser}\n          currentUser={currentUser}\n          currentUserId={currentUser.userId}\n          parent={0}\n          isPrimary={true}\n          chainChangeCanEditPost = {[]}\n          prevTermCanEditPost = {null}\n          parentSetHideChildren = {null}\n          usersLength = {allUsers.length}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default App;","// These must be the first lines in src/index.js\nimport 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nwindow.addEventListener('load', (e)=>{\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('resautcat-content-container')\n  );\n\n  if(process.env.NODE_ENV === 'development'){\n    var resautcat_page_admin = document.querySelector('#resautcat-page-admin');\n    resautcat_page_admin.style.opacity = 1;\n  }\n});"],"sourceRoot":""}